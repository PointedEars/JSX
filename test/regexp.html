<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>regexp.js Test Case</title>
    <script type="text/javascript" src="object.js"></script>
    <script type="text/javascript" src="test.js"></script>
    <script type="text/javascript" src="http.js"></script>
    <script type="text/javascript" src="regexp.js"></script>
    <script type="text/javascript" src="../UnicodeData.js"></script>
    <script type="text/javascript">
      var assert = jsx.test.assert;
      var RegExp2 = jsx.regexp.RegExp;

      jsx.test.runner.run({
        tests: [
          {
            name: "Use statically loaded UCD",
            code: function() {
              assert(typeof RegExp2.propertyClasses != "undefined");
              var rx = new RegExp2("\\p{Zp}");
              assert(rx.source == "[\\u2029]");
              console.log(rx);
            }
          },
          {
            name: "Load UCD dynamically with XHR",
            code: function() {
              delete RegExp2.propertyClasses;
              jsx._import("../http.js");
              var rx = new RegExp2("\\p{Zp}");
              assert(rx.source == "[\\u2029]");
              console.log(rx);
            },
          },
          {
            name: "Throw exception on undefined property class",
            code: function() {
              RegExp2.deletePropertyClass("Zp");
              var throwed = false;
              jsx.tryThis(
                function () {
                  console.log(new RegExp2("\\p{Zp}"));
                },
                function (e) {
                  if (e.name == "jsx.regexp.UnknownPropertyClassError")
                  {                  
                    throwed = true;
                    console.log(e);
                  }
                  else
                  {
                    jsx.throwThis(function () { return e; });
                  }
                });
              assert(throwed);
            }
          }
        ]
      });
    </script>
  </head>

  <body>
    <h1><tt>regexp.js</tt> Test&nbsp;Case</h1>
<!--     <div><a href="jsunit/testRunner?testPage=<?php -->
<!--       echo urlencode(htmlentities($_SERVER['REQUEST_URI'])); ?>&amp;autoRun=true" -->
<!--       >Run tests</a></div> -->
  </body>
</html>